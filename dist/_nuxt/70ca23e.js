(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{647:function(t,e,o){"use strict";o.r(e);var r=o(151),n=o(173),l=o(273),c=o(33),d=o(619),m=o(271),f=o(212),_=o(616),y=o(75),h=o(6),v=(o(50),o(19),o(8),o(65),o(27),{props:{end_point:String,stocks_data:Object,dialog:Boolean,title:String},data:function(){return{show_type:!1,show_property_code:!1,show_quantity:!0,field_title:null,data:null,form:{item_status_id:null,property_name:null,action:null,type:null,serial_number:null,purchaser:null,cost:0,quantity:1,property_code:null},status:{options:[]},type:[{label:"Consumable",value:"Consumable"},{label:"Non-Consumable",value:"Non-Consumable"}],received_by:{options:[],hasIcon:{status:!0,icon:"mdi-account",modal:{title:"Received By",fields:[{cols:1,name:"fname",title:"First Name",rules:"required",type:"text"},{cols:1,name:"mname",title:"Middle Name",type:"text"},{cols:1,name:"lname",title:"Last Name",rules:"required",type:"text"},{cols:1,name:"office",title:"Office",rules:"required",type:"text"}],button:{color:"success",btn_name:"Save",icon:"mdi-content-save"}}}},received_from:{options:[]},assigned_person:{options:[]},location:{options:[],hasIcon:{status:!0,icon:"mdi-map-marker-plus-outline",modal:{title:"Location",fields:[{cols:1,name:"name",title:"Location",rules:"required",type:"text"}],button:{color:"success",btn_name:"Save",icon:"mdi-content-save"}}}},purchaser:[{label:"Provincial Office",value:"Provincial Office"},{label:"Regional Office",value:"Regional Office"}],category:{options:[],hasIcon:{status:!0,icon:"mdi-folder-multiple-outline",modal:{title:"Add Category",fields:[{cols:1,name:"name",title:"Category",rules:"required",type:"text"}],button:{color:"success",btn_name:"Save",icon:"mdi-content-save"}}}}}},methods:{onSubmit:function(){this.form.assigned_person_id=Number(this.form.assigned_person),this.form.item_category_id=Number(this.form.category.id),this.form.received_by_id=Number(this.form.received_by),this.form.received_from_id=Number(this.form.received_from),"Consumable"===this.stocks_data.item.type?this.form.item_status_id=Number(this.form.status):this.form.item_status_id=null,this.form.location_id=Number(this.form.location),this.form.type=this.stocks_data.item.type,this.form.action=this.stocks_data.type,this.form.purchaser=this.stocks_data.item.purchaser,this.form.cost=this.stocks_data.item.cost,this.form.property_name=this.stocks_data.item.property_name,this.form.description=this.stocks_data.item.description,this.$emit("manageStocks",this.form,"add")},getStatus:function(){this.status.options=this.$store.state.item_status.item_status.data},addLocation:function(form){var t=this;this.$store.dispatch("postLocation",form).then((function(e){t.$toast.success("Location ".concat(e.data.name," has been added successfully.")),t.$store.dispatch("getLocations"),t.location.options.push(e.data)})).catch((function(e){t.$toast.error(e)}))},getLocation:function(){this.location.options=this.$store.state.locations.locations.data},addCategory:function(form){var t=this;this.$store.dispatch("postItemCategory",form).then((function(e){t.$toast.success("Category ".concat(e.data.name," has been added successfully.")),t.$store.dispatch("getItemCategories"),t.category.options.push(e.data)})).catch((function(e){t.$toast.error(e)}))},addEmployee:function(form){var t=this;this.$store.dispatch("postEmployee",form).then((function(e){t.$toast.success("Employee ".concat(e.data.fullname," has been added successfully.")),t.$store.dispatch("getEmployees"),t.received_by.options.push(e.data),t.received_from.options.push(e.data),t.assigned_person.options.push(e.data)})).catch((function(e){t.$toast.error(e)}))},getEmployee:function(){this.received_by.options=this.$store.state.employees.employees.data,this.received_from.options=this.$store.state.employees.employees.data,this.assigned_person.options=this.$store.state.employees.employees.data},stocks:function(){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.data.quantity<t.form.quantity&&"deduct"===t.stocks_data.type)){e.next=4;break}t.$toast.error("Not Enought Stock/Stocks."),e.next=8;break;case 4:return t.data.quantity="deduct"===t.stocks_data.type?t.data.quantity-=t.form.quantity:t.data.quantity+=t.form.quantity,"deduct"===t.stocks_data.type&&(t.data.action="deduct"),e.next=8,t.$axios.$post("update_or_create_item",t.data).then((function(e){t.$emit("confirmStocks",e),t.$emit("closeModal")}));case 8:case"end":return e.stop()}}),e)})))()},model:function(t,e){this.form[e]=t}},watch:{"form.type":function(t){console.log(t),"Consumable"===t?this.show_type=!0:(console.log(t),this.show_type=!1)},"form.purchaser":function(t){"Regional Office"===t?(this.form.quantity=1,this.show_quantity=!1,this.show_property_code=!0,this.form.property_code="SRC-W-"+(new Date).getFullYear()+"-"):(this.show_quantity=!0,this.show_property_code=!1,this.form.property_code="PO-"+(new Date).getFullYear()+"-")}},mounted:function(){this.data=this.stocks_data.item,this.field_title="deduct"===this.stocks_data.action?"Deduct Quantity":"Add Quantity",this.getCategory(),this.getEmployee(),this.getLocation(),this.getStatus(),console.log(this.stocks_data.item.item_category_id)}}),k=o(47),component=Object(k.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(d.a,{attrs:{width:t.$vuetify.breakpoint.xs?"90vw":"20vw",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(l.a,[e(c.d,{staticClass:"d-flex justify-space-between text-h5 primary white--text"},[t._v("\n        "+t._s(t.title)+"\n        "),e(f.a,{attrs:{color:"white"},on:{click:function(e){return t.$emit("closeModal")}}},[t._v("mdi-close")])],1),t._v(" "),e(c.c,{staticClass:"pa-5"},[e("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(o){var l=o.valid,d=o.invalid;return[e("form",{staticClass:"d-flex flex-column",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("Input",{attrs:{valid:l,disabled:"disabled",title:"Type",name:"type",type:"radio",rules:"required",value:t.stocks_data.item.type,options:t.type},on:{model:function(e){return t.model(e,"type")}}}),t._v(" "),e("Input",{attrs:{valid:l,disabled:"disabled",title:"Purchaser",name:"purchaser",type:"radio",rules:"required",value:t.stocks_data.item.purchaser,options:t.purchaser},on:{model:function(e){return t.model(e,"purchaser")}}}),t._v(" "),e("Input",{attrs:{valid:l,disabled:"disabled",title:"Category",name:"category",type:"autocomplete",rules:"required",item_text:"name",item_value:"id",hasIcon:t.category.hasIcon,options:t.category.options,value:t.stocks_data.item.item_category_info},on:{model:function(e){return t.model(e,"category")},modalInput:t.addCategory}}),t._v(" "),e("ValidationProvider",{attrs:{rules:"Regional Office"===t.stocks_data.property_code?{required:!0,regional_format:"^(SRC-W-)[A-Za-z0-9]"}:{required:!0},name:"Property Code"},scopedSlots:t._u([{key:"default",fn:function(o){var r=o.errors;return[e(y.a,{staticClass:"pa-0 ma-0",attrs:{disabled:!t.show_property_code,name:"property_code",label:"Property Code",placeholder:"Property Code",type:"text","error-messages":r,success:l},model:{value:t.form.property_code,callback:function(e){t.$set(t.form,"property_code",e)},expression:"form.property_code"}})]}}],null,!0)}),t._v(" "),e("ValidationProvider",{attrs:{name:"Serial Number"},scopedSlots:t._u([{key:"default",fn:function(o){var r=o.errors;return[e(y.a,{staticClass:"pa-0 ma-0",attrs:{name:"serial_number",label:"Serial Number",placeholder:"Serial Number",type:"text","error-messages":r,success:l},model:{value:t.form.serial_number,callback:function(e){t.$set(t.form,"serial_number",e)},expression:"form.serial_number"}})]}}],null,!0)}),t._v(" "),e("Input",{attrs:{valid:l,title:"Location",name:"location",type:"autocomplete",rules:"required",item_text:"name",item_value:"id",hasIcon:t.location.hasIcon,options:t.location.options},on:{model:function(e){return t.model(e,"location")},modalInput:t.addLocation}}),t._v(" "),e("Input",{attrs:{valid:l,title:"Received By",name:"received_by",type:"autocomplete",rules:"required",item_text:"fullname",item_value:"id",hasIcon:t.received_by.hasIcon,options:t.received_by.options},on:{model:function(e){return t.model(e,"received_by")},modalInput:t.addEmployee}}),t._v(" "),e("Input",{attrs:{valid:l,title:"Received From",name:"received_from",type:"autocomplete",rules:"required",item_text:"fullname",item_value:"id",options:t.received_by.options},on:{model:function(e){return t.model(e,"received_from")}}}),t._v(" "),e("Input",{attrs:{valid:l,title:"Assigned Person",name:"assigned_person",type:"autocomplete",rules:"required",item_text:"fullname",item_value:"id",options:t.assigned_person.options},on:{model:function(e){return t.model(e,"assigned_person")}}}),t._v(" "),e("Input",{attrs:{valid:l,title:"Date Acquired",name:"date_acquired",type:"date",rules:"required"},on:{model:function(e){return t.model(e,"date_acquired")}}}),t._v(" "),e("Input",{attrs:{valid:l,title:"Date Received",name:"date_received",type:"date",rules:"required"},on:{model:function(e){return t.model(e,"date_received")}}}),t._v(" "),e("ValidationProvider",{attrs:{name:"Status"},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[e(r.a,{staticClass:"pa-0 ma-0",attrs:{items:t.status.options,"item-text":"name","item-value":"id",label:"Status",name:"status",disabled:t.show_type,"error-messages":n,success:l},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})]}}],null,!0)}),t._v(" "),e("ValidationProvider",{attrs:{rules:"required",name:"Quantity"},scopedSlots:t._u([{key:"default",fn:function(o){var r=o.errors;return[e(y.a,{staticClass:"pa-0 ma-0",attrs:{disabled:!t.show_quantity,name:"quantity",label:"Quantity",placeholder:"Quantity",type:"number","error-messages":r,success:l},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})]}}],null,!0)}),t._v(" "),e(m.a),t._v(" "),e(c.a,[e(_.a),t._v(" "),e(n.a,{attrs:{type:"submit",color:"primary",disabled:d}},[e(f.a,{staticClass:"mx-1"},[t._v(" mdi-content-save")]),t._v("\n                Save\n              ")],1)],1)],1)]}}])})],1)],1)],1)],1)}),[],!1,null,"09e5c663",null);e.default=component.exports;installComponents(component,{Input:o(319).default,Form:o(221).default})}}]);