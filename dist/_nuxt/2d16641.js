(window.webpackJsonp=window.webpackJsonp||[]).push([[20,7],{636:function(e,t,r){"use strict";r.r(t);var n=r(173),o=r(273),l=r(33),d=r(619),c=r(271),_=r(212),m=r(218),f=r(172),v=r(268),h=r(66),y=r(616),k=r(6),x=(r(50),r(25),{props:{end_point:String,delete_data:Object,dialog:Boolean,title:String},data:function(){return{}},methods:{destroy:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$delete("".concat(e.end_point,"/").concat(e.delete_data.id)).then((function(t){e.$emit("confirmDelete",t),e.$emit("closeModal")}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))()}}}),w=r(47),component=Object(w.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(d.a,{attrs:{width:e.$vuetify.breakpoint.xs?"90vw":"20vw",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o.a,[t(l.d,{staticClass:"d-flex justify-space-between text-h5 primary white--text"},[e._v("\n        "+e._s(e.title)+"\n        "),t(_.a,{attrs:{color:"white"},on:{click:function(t){return e.$emit("closeModal")}}},[e._v("mdi-close")])],1),e._v(" "),t(l.c,[t(f.a,{attrs:{"three-line":""}},[t(h.a,[e._v("\n            Are you sure you want to delete this data?\n          ")]),e._v(" "),t(v.a,{attrs:{tile:"",size:"100"}},[t(m.a,{attrs:{src:"trash.png"}})],1)],1)],1),e._v(" "),t(c.a),e._v(" "),t(l.a,[t(y.a),e._v(" "),t(n.a,{attrs:{color:"primary"},on:{click:function(t){return e.destroy()}}},[t(_.a,{staticClass:"mr-1",attrs:{small:""}},[e._v(" mdi-delete")]),e._v("\n          Delete\n        ")],1)],1)],1)],1)],1)}),[],!1,null,"7c4fea62",null);t.default=component.exports},694:function(e,t,r){"use strict";r.r(t);var n=r(151),o=r(173),l=r(273),d=r(33),c=r(621),_=r(689),m=r(626),f=r(619),v=r(271),h=r(212),y=r(274),k=r(620),x=r(46),w=r(664),$=r(616),L=r(75),S=r(622),P=(r(30),r(318),r(19),r(8),r(65),r(27),r(10),r(4),{middleware:"admin",components:{DeleteLoan:r(636).default},data:function(){return{delete_loan_dialog:!1,delete_data:{id:null},start_date_modal:!1,end_date_modal:!1,transfer_type:["Donation","Relocate","Others"],items:[],condition:["New","Used","Damaged"],form:{item_data:[]},search:"",headers:[{text:"Info",align:"start",sortable:!1,value:"info"},{text:"Transaction Date",value:"created_at"},{text:"LT Number",value:"transaction_no"},{text:"Property Count",value:"property_count"},{text:"Lender Name",value:"lender_name"},{text:"Borrower Name",value:"borrower_name"},{text:"Purpose of Loan",value:"purpose_of_loan"},{text:"Status",value:"condition"},{text:"Actions",value:"actions"}],transactions:[]}},methods:{confirmDelete:function(){this.$toast.success("Loan with ID ".concat(this.delete_data.id," has been deleted successfully.")),this.getLoans()},destroyLoan:function(e){this.delete_data.id=e,this.delete_loan_dialog=!0},onSubmit:function(){var e=this;this.$store.dispatch("postLoanProperty",this.form).then((function(t){e.$toast.success("Loan Property with ".concat(t.data.transaction_no," Transaction No. has been added successfully.")),e.$refs.observer.reset(),e.form={item_data:[],start_date:null},e.getLoans(),e.$store.dispatch("getItemList"),e.$store.dispatch("getItems"),e.items=e.$store.state.items.items.data.filter((function(e){return null==e.transaction_status}))})).catch((function(t){e.$toast.error(t)}))},getLoans:function(){var e=this;this.$store.dispatch("getLoans").then((function(t){e.transactions=t}))}},mounted:function(){this.getLoans(),this.items=this.$store.state.items.items.data.filter((function(e){return null==e.transaction_status}))}}),D=r(47),component=Object(D.a)(P,(function(){var e=this,t=e._self._c;return t(k.a,{staticClass:"container fluid"},[t(c.a,{attrs:{cols:"12",lg:"8",md:"12",sm:"12",xs:"12"}},[t(l.a,[t(d.d,[e._v("\n        Loan List\n        "),t($.a),e._v(" "),t(L.a,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t(_.a,{attrs:{headers:e.headers,items:e.transactions,search:e.search},scopedSlots:e._u([{key:"item.created_at",fn:function(r){var n=r.item;return[t("p",[e._v(e._s(n.created_at.split("T")[0]))])]}},{key:"item.property_count",fn:function(r){var n=r.item;return[t("p",[e._v(e._s(n.item_data.length))])]}},{key:"item.actions",fn:function(r){var n=r.item;return[t(h.a,{on:{click:function(t){e.destroyLoan(Number(n.id))}}},[e._v("mdi-delete")])]}},{key:"item.info",fn:function(r){var n=r.item;return[t(y.a,{attrs:{"close-on-content-click":!1,"open-on-hover":"","nudge-width":200,"offset-y":"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[t("span",e._g(e._b({},"span",o,!1),n),[t(h.a,{staticStyle:{cursor:"pointer"},attrs:{color:"primary"}},[e._v("mdi-information")])],1)]}}],null,!0)},[e._v(" "),t(l.a,{attrs:{flat:""}},[t(w.a,{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[t("h2",{staticClass:"mx-3 my-3"},[e._v("Property List:")]),e._v(" "),t("divider"),e._v(" "),e._l(n.item_data,(function(r,n){return t("tbody",{key:n},[t("th",[e._v("Number")]),e._v(" "),t("th",[e._v("Name")]),e._v(" "),t("th",[e._v("Code")]),e._v(" "),t("th",[e._v("Description")]),e._v(" "),t("th",[e._v("SN")]),e._v(" "),t("th",[e._v("Cost")]),e._v(" "),t("th",[e._v("Date Acquired")]),e._v(" "),t("th",[e._v("Date Received")]),e._v(" "),t("th",[e._v("Type")]),e._v(" "),t("th",[e._v("Purchaser")]),e._v(" "),t("tr",[t("td",[e._v(e._s(n+1))]),e._v(" "),t("td",[e._v(e._s(r.property_name))]),e._v(" "),t("td",[e._v(e._s(r.property_code))]),e._v(" "),t("td",[e._v(e._s(r.description))]),e._v(" "),t("td",[e._v(e._s(r.serial_number))]),e._v(" "),t("td",[e._v(e._s(r.cost))]),e._v(" "),t("td",[e._v(e._s(r.date_acquired))]),e._v(" "),t("td",[e._v(e._s(r.date_received))]),e._v(" "),t("td",[e._v(e._s(r.type))]),e._v(" "),t("td",[e._v(e._s(r.purchaser))])]),e._v(" "),t(v.a)],1)}))]},proxy:!0}],null,!0)})],1)],1)]}}],null,!0)})],1)],1),e._v(" "),t(c.a,{attrs:{cols:"12",lg:"4",md:"12",sm:"12",xs:"12"}},[t(l.a,{staticClass:"pa-3"},[t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(r){var l=r.valid,d=r.invalid;return[t("form",{staticClass:"d-flex flex-column",on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("ValidationProvider",{attrs:{rules:"required",name:"Property List"},scopedSlots:e._u([{key:"default",fn:function(r){var o=r.errors;return[t(n.a,{attrs:{items:e.items,dense:"",chips:"","small-chips":"",label:"Property List",multiple:"",solo:"","item-text":"property_code","return-object":"",name:"item_data","error-messages":o,success:l},scopedSlots:e._u([{key:"item",fn:function(data){return[t(L.a,{attrs:{readonly:"",label:"Date Acquired","hide-details":"auto",value:data.item.date_acquired}}),e._v(" "),t(L.a,{attrs:{readonly:"",label:"Property Code","hide-details":"auto",value:data.item.property_code}}),e._v(" "),t(L.a,{attrs:{readonly:"",label:"Description","hide-details":"auto",value:data.item.description}}),e._v(" "),t(L.a,{attrs:{readonly:"",label:"Amount","hide-details":"auto",value:data.item.cost}}),e._v(" "),t(L.a,{attrs:{readonly:"",label:"Category","hide-details":"auto",value:data.item.item_category_info.name}}),e._v(" "),t(L.a,{attrs:{readonly:"",label:"Purchaser","hide-details":"auto",value:data.item.purchaser}})]}}],null,!0),model:{value:e.form.item_data,callback:function(t){e.$set(e.form,"item_data",t)},expression:"form.item_data"}})]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Transaction No."},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Transaction No.","hide-details":"auto",name:"transaction_no","error-messages":n,success:l},model:{value:e.form.transaction_no,callback:function(t){e.$set(e.form,"transaction_no",t)},expression:"form.transaction_no"}})]}}],null,!0)}),e._v(" "),t("p",{staticClass:"font-weight-black mt-5"},[e._v("I. Lender Information")]),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Lender Name"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Lender Name","hide-details":"auto",name:"lender_name","error-messages":n,success:l},model:{value:e.form.lender_name,callback:function(t){e.$set(e.form,"lender_name",t)},expression:"form.lender_name"}})]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Lender Agency"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Lender Agency","hide-details":"auto",name:"lender_agency","error-messages":n,success:l},model:{value:e.form.lender_agency,callback:function(t){e.$set(e.form,"lender_agency",t)},expression:"form.lender_agency"}})]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Lender Designation"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Lender Designation","hide-details":"auto",name:"lender_designation","error-messages":n,success:l},model:{value:e.form.lender_designation,callback:function(t){e.$set(e.form,"lender_designation",t)},expression:"form.lender_designation"}})]}}],null,!0)}),e._v(" "),t("p",{staticClass:"font-weight-black mt-5"},[e._v("II. Borrower's Information")]),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Borrower Name"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Borrower's Name","hide-details":"auto",name:"borrower_name","error-messages":n,success:l},model:{value:e.form.borrower_name,callback:function(t){e.$set(e.form,"borrower_name",t)},expression:"form.borrower_name"}})]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Borrower Agency"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Borrower Agency","hide-details":"auto",name:"borrower_agency","error-messages":n,success:l},model:{value:e.form.borrower_agency,callback:function(t){e.$set(e.form,"borrower_agency",t)},expression:"form.borrower_agency"}})]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Borrower Designation"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(L.a,{attrs:{label:"Borrower Designation","hide-details":"auto",name:"borrower_designation","error-messages":n,success:l},model:{value:e.form.borrower_designation,callback:function(t){e.$set(e.form,"borrower_designation",t)},expression:"form.borrower_designation"}})]}}],null,!0)}),e._v(" "),t("p",{staticClass:"font-weight-black mt-5"},[e._v("III. Inclusive Date of Loan")]),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Start Date"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(f.a,{ref:"start_date_modal",attrs:{"return-value":e.form.start_date,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.form,"start_date",t)},"update:return-value":function(t){return e.$set(e.form,"start_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,d=r.attrs;return[t(L.a,e._g(e._b({staticClass:"pa-0 ma-0",attrs:{name:"start_date",label:"Start Date","prepend-icon":"mdi-calendar",readonly:"","error-messages":n,success:l},model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}},"v-text-field",d,!1),o))]}}],null,!0),model:{value:e.start_date_modal,callback:function(t){e.start_date_modal=t},expression:"start_date_modal"}},[e._v(" "),t(m.a,{attrs:{scrollable:""},model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}},[t($.a),e._v(" "),t(o.a,{attrs:{text:"",color:"primary"},on:{click:function(t){e.start_date_modal=!1}}},[e._v("\n                  Cancel\n                ")]),e._v(" "),t(o.a,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.start_date_modal.save(e.form.start_date)}}},[e._v("\n                  OK\n                ")])],1)],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"End Date"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(f.a,{ref:"end_date_modal",attrs:{"return-value":e.form.end_date,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.form,"end_date",t)},"update:return-value":function(t){return e.$set(e.form,"end_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,d=r.attrs;return[t(L.a,e._g(e._b({staticClass:"pa-0 ma-0",attrs:{name:"end_date",label:"End Date","prepend-icon":"mdi-calendar",readonly:"","error-messages":n,success:l},model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}},"v-text-field",d,!1),o))]}}],null,!0),model:{value:e.end_date_modal,callback:function(t){e.end_date_modal=t},expression:"end_date_modal"}},[e._v(" "),t(m.a,{attrs:{scrollable:""},model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}},[t($.a),e._v(" "),t(o.a,{attrs:{text:"",color:"primary"},on:{click:function(t){e.end_date_modal=!1}}},[e._v("\n                  Cancel\n                ")]),e._v(" "),t(o.a,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.end_date_modal.save(e.form.end_date)}}},[e._v("\n                  OK\n                ")])],1)],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Purpose of Loan"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(S.a,{attrs:{name:"purpose_of_loan",label:"Purpose of Loan",rows:"2","error-messages":n,success:l},model:{value:e.form.purpose_of_loan,callback:function(t){e.$set(e.form,"purpose_of_loan",t)},expression:"form.purpose_of_loan"}})]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{rules:"required",name:"Condition of PPE"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t(x.a,{attrs:{items:e.condition,label:"Condition of PPE",name:"condition","error-messages":n,success:l},model:{value:e.form.condition,callback:function(t){e.$set(e.form,"condition",t)},expression:"form.condition"}})]}}],null,!0)}),e._v(" "),t("div",{staticClass:"d-flex justify-end"},[t(o.a,{staticClass:"mt-3 align-self-end",attrs:{type:"submit",color:"primary",disabled:d}},[t(h.a,[e._v(" mdi-content-save ")]),e._v("\n              Save\n            ")],1)],1)],1)]}}])})],1)],1),e._v(" "),!0===e.delete_loan_dialog?t("DeleteLoan",{attrs:{dialog:e.delete_loan_dialog,title:"Delete Loan",end_point:"delete_loan",delete_data:e.delete_data},on:{closeModal:function(t){e.delete_loan_dialog=!1},confirmDelete:e.confirmDelete}}):e._e()],1)}),[],!1,null,"5aec495a",null);t.default=component.exports;installComponents(component,{Form:r(221).default})}}]);